# Utilisation des ressources mises à disposition par Alibaba Cloud

## LLM

### Description d'une course

Au départ du projet, un des objectifs à atteindre était d'obtenir un résumé de la part d'un LLM pour une course donnée.

#### Etat de l'art

Un état de l'art a été effectué en utilisant ChatGPT (UI) et Qwen3-Max (UI) avec la vidéo *Steven Dubois Wins in Dramatic Fashion _ 500m Men Final _ Tilburg 2025 _ #ShortTrackWorldTour* (en la renommant *video* pour ne pas influencer le LLM).

Dans cette vidéo, on observe en tant qu'humain :

- un patineur qui prend immédiatement la tête
- trois patineurs qui chutent dans un virage après environ deux tours et tous reprennent la course
- les deux premiers patineurs qui sont très heureux, tout comme l'équipe technique
- un replay permettant de voir :
  - la rapiditié des patineurs tombés afin de regagner leur place
  - un patineur qui gagne une place après avoir chuté (combinaison orange) et qui est très heureux car il a été poussé par un autre patineur et réussit tout de même à revenir

Le prompt utilisé est :

```
You are a sports commentator specialising in short track speed skating.
I would like you to analyse the video of the race, as well as the slow-motion replays and highlights, to extract the relevant information to communicate to the public, such as falls, overtaking manoeuvres, athletes' reactions, etc.
You should not take into account anything that is not related to the race (medal ceremonies, displaying the schedule for upcoming races or scores, ...).
Your description should be no more than 10 sentences long.
```

Avec ChatGPT, un échange interminable a conduit au fait qu'il n'est pas en mesure d'analyser la vidéo (pas la version gratuite) :

```
- "Would you like the analysis to sound like a live commentary (energetic, present-tense, as if happening in real time) or more like a post-race analysis (objective, reflective tone)?"
- "both"
- "1. Visually analyse the race (detect falls, overtakes, gestures, etc.) directly from the footage / 2. Use only the audio commentary (if present) to infer what happens?"
- "1"
- "Would you like me to include the names or nationalities of skaters if visible on the suits or scoreboard, or keep the commentary generic?"
- "include it"
- "I don’t have the ability to watch or interpret the content of a video file directly."
- "nice..."
```

Avec Qwen3-Max, le résultat était prometteur :

```
In a dramatic Men's 500m Final A in Tilburg, Canada's Steven Dubois surged from the back to claim victory in 40.33 seconds after a chaotic pile-up eliminated several contenders early on. The race saw a major crash on the first turn involving Japan's Shaoang Liu and others, which cleared the path for Dubois and his teammate J. Pierre-Gilles. Dubois then executed a flawless final lap, overtaking the Dutch skater who had led for much of the race, while Pierre-Gilles secured second place. The Canadian duo celebrated their one-two finish with hugs on the ice before Dubois was officially awarded the gold medal, delighting the Canadian fans waving their flags in the stands.
```

On peut voir que le contexte de la course est bien défini, que les patineurs célèbres ont été reconnus, que les détails de la course sont presque corrects (chute un peu plus tardive que celle indiquée par le LLM) et que la cérémonie a été mentionnée alors que ce n'était pas l'objectif.

#### Processing vidéo

L'idée initiale était de donner les vidéos segmentées au LLM pour obtenir les descriptions de chaque course. Le problème est que ce processus est coûteux et qu'il aurait fallu découper les vidéos en frames de façon assez précises pour ne pas perdre d'informations, tout en restant dans un nombre inférieur à la limite autorisée par le modèle. Le service *Intelligent Media Processing* (IMP) de Alibaba Cloud aurait permis de faire ce découpage en frames et nous aurions pu ensuite utiliser un des modèles suivants :
   - qwen-vl-plus-2025-01-25 (un des moins chers -> https://modelstudio.console.alibabacloud.com/?tab=doc#/doc/?type=model&url=2840914_2&modelId=qwen-vl-plus-2025-01-25)
   - qwen2.5-vl-72b-instruct (bien documenté -> https://www.alibabacloud.com/help/en/model-studio/use-qwen-by-calling-api#513167d9c1eew / CTRL+F "video")

Une alternative était d'utiliser les fichiers jsons fournis par l'ISU, ce que nous avons fait par la suite.

#### Processing json

La difficulté pour cette tâche était de trouver un prompt idéal. Une fois le prompt trouvé, il était facile d'obtenir les résultats souhaités, à savoir une description brève de chaque course mentionnant le classement final et les actions durant la course (voir scripts *retrieve_descriptions_skater_and_race.py* et *generate_race_description.py*).

Ci-dessous les différents tests effectués pour trouver un prompt permettant d'obtenir le au résultat souhaité :

| Prompt                                                                                                                                                                                                                                                                                                      | Résultat                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Conclusion                                                                                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------|
| Your task is to provide me with specific information about the short track speed skating race for the {discipline_name} discipline during the {round_name} round and the {heat_name} heat. I want to know: the final ranking, which athletes competed, and the performance of each athlete during the race. | Here is the detailed information about the **Men's 500 m Final A** race:\n\n### **Final Ranking and Competitors:**\n1. **Gold (1st):**  \n   - **Bib Number:** 2  \n   - **Final Time:** **41.124 seconds**  \n   - **Lap Times:**  \n     - Lap 1: 6.690 s  \n     - Lap 2: 9.070 s  \n     - Lap 3: 8.380 s  \n     - Lap 4: 8.380 s  \n     - Lap 5: 8.604 s  \n\n2. **Silver (2nd):**  \n   - **Bib Number:** 3  \n   - **Final Time:** **41.183 seconds** (+0.059 behind gold)  \n   - **Lap Times:**  \n     - Lap 1: 6.800 s  \n     - Lap 2: 9.180 s  \n     - Lap 3: 8.580 s  \n     - Lap 4: 8.200 s  \n     - Lap 5: 8.423 s  \n\n3. **Bronze (3rd):**  \n   - **Bib Number:** 11  \n   - **Final Time:** **41.354 seconds** (+0.230 behind silver)  \n   - **Lap Times:**  \n     - Lap 1: 7.130 s  \n     - Lap 2: 8.960 s  \n     - Lap 3: 16.830 s (slowed significantly)  \n     - Lap 4 & 5: Combined time of 8.434 s (missing intermediate lap data)  \n\n4. **4th Place:**  \n   - **Bib Number:** 46  \n   - **Final Time:** **41.631 seconds** (+0.507 behind bronze)  \n   - **Lap Times:**  \n     - Lap 1: 6.810 s  \n     - Lap 2: 9.480 s  \n     - Lap 3: 8.650 s  \n     - Lap 4: 8.260 s  \n     - Lap 5: 8.431 s  \n\n5. **Penalty (Did Not Finish Officially):**  \n   - **Bib Number:** 18  \n   - **Result:** **PEN (Penalty)**  \n   - No lap times recorded due to disqualification.\n\n### **Race Summary:**\n- The race was extremely close, with the top three skaters separated by just **0.230 seconds**.\n- The winner maintained a strong and consistent pace throughout, leading from the start.\n- Bib 11 had a significant slowdown in Lap 3 but managed to recover for bronze.\n- Bib 18 was penalized, likely due to a rules violation (e.g., false start, obstruction).\n\nFor visual confirmation, you can view the [photo finish here](https://archive.isu.swisstiming.com/api-general/v1/photo-finish/?sourceId=d05c7f68-81f9-46a5-b1b5-aff49218b124).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Le contexte n'était pas assez précis, il fallait lui mentionner le "ton" souhaité et le format était en Markdown, non en texte brut. |
| You are an amazing sportscaster dedicated to describing the short track speed skating race for the {discipline_name} discipline during the {round_name} round and the {heat_name} heat. You will briefly give the ranking (e.g., 1. athlete name (time, gap with the athlete just before), 2. ...) and describe the race (overtakes, falls, accelerations, penalties, whether the ranking was decided from the start or remained extremely close until the end, etc.).                                                                                                                                                                                                                                                                                                   | Ladies and gentlemen, what a thrilling Final A in the Men's 500 meters here at the ISU World Cup! The tension was palpable from the very first stride, and the race delivered on every front—explosive starts, razor-thin margins, and high drama. Let’s break down the final ranking: 1. **Steven (41.124)** – A masterclass in consistency and control. Steven seized the lead right from the start and never looked back. Clocking lap times of 6.690, 9.070, 8.380, 8.380, and a strong 8.604 on the final lap, he maintained clean lines and perfect balance through each turn. His dominance was clear early—he led every single lap, building a small but steady gap. 2. **William (+0.059, 41.183)** – Just shy of gold, William skated a technically superb race. Starting from lane 4, he quickly found his rhythm, matching Steven’s pace closely. His best moment came on lap 4 when he recorded an 8.200 split—the fastest of the field that lap—narrowing the gap. He finished with a 8.423 final lap, nearly pulling off a last-corner surge, but Steven held firm. 3. **Pietro (+0.230, 41.354)** – A rollercoaster performance from Pietro. He started poorly, trailing in fifth after the first corner with a 7.130 opening lap. However, he mounted a stunning mid-race recovery, using a blistering third lap of 16.830 (which likely includes a full pass or two) to climb back into contention. Though one lap time appears anomalous—possibly due to a drafting maneuver or data glitch—his determination earned him the bronze. 4. **Shogo (+0.507, 41.631)** – Solid but unspectacular. Shogo began well in lane 3 but lost crucial ground in the second lap, dropping to fifth momentarily. He fought hard to regain position, posting consistent splits, including an 8.260 on lap 4. Ultimately, he couldn’t close the gap on the podium trio. And heartbreak for **Michal**, who was shown a **penalty (PEN)**. While details aren’t fully clear, it appears he may have impeded another skater during a lane change or inside turn cut. No fall, no crash—but a costly infraction that ended his medal hopes. **Race Summary:**  \nThis wasn’t a race decided solely by raw speed—it was a chess match on blades. Steven’s flawless execution from lane 1 set the tone. William pushed him to the limit, making it one of the closest 500m finishes of the season. Meanwhile, Pietro’s comeback and Michal’s penalty added layers of drama. In the end, precision, patience, and poise under pressure crowned the champion.\n\nWhat a finish—short track at its finest!" | Beaucoup trop euphorique et pas assez réaliste. |
| You are a sportscaster dedicated to describing the short track speed skating race for the {discipline_name} discipline during the {round_name} round and the {heat_name} heat. You will briefly give the ranking (e.g., 1. athlete name (time, gap with the athlete just before), 2. ...) and describe the race (overtakes, falls, accelerations, penalties, whether the ranking was decided from the start or remained extremely close until the end, etc.). Keep it simple (raw text), and maximum 10 lines. | 1. Steven (41.124)  \n2. William (+0.059)  \n3. Pietro (+0.230)  \n4. Shogo (+0.507)  \n5. Michal (PEN) Steven took the lead from the start and held it cleanly. William advanced from fourth to second with a strong final lap. Pietro surged late after a slow start, overtaking Shogo mid-race. Shogo faded slightly but finished fourth. Michal was penalized, likely for a lane violation or contact. The top three battled closely, with just 0.23 seconds separating them. |Concis et simple, ce qui est souhaité.|

### Biographie d'un athlète

Une deuxième idée était d'obtenir une biographie d'un athlète sur la base des données récoltées sur le site de l'ISU (voir script de scrapping).

#### Etat de l'art

Un bref état de l'art a été effectué pour à la fois tester des prompts et savoir si des modèles connaissaient déjà certains patineurs. Avec le prompt "Please provide me with all the information you have about the Swiss short track speed skater named {skater}." pour les patineurs Sascha LAUBER et Thibault METRAUX, il s'est avéré que ChatGPT ressortait les informations du site de l'ISU ainsi que des informations des réseaux sociaux, alors que Qwen3-Max ne possédait aucune information à leur sujet :

```
As of now, there is no widely known or publicly documented Swiss short track speed skater named Sascha Lauber in major international competitions, official International Skating Union (ISU) records, or reputable sports databases.

It's possible that:

1. Sascha Lauber is a relatively new or emerging athlete who has not yet competed at the international level (e.g., World Championships, European Championships, or the Winter Olympics).
2. The name may be misspelled or confused with another athlete (e.g., there is a Swiss speed skater named Sascha Giger, who competes in long track, not short track).
3. The individual may compete domestically in Switzerland but has not gained international recognition.

If you have additional context—such as a specific competition, club affiliation, or recent result—I’d be happy to help investigate further. Otherwise, based on currently available public information, there is no notable record of a Swiss short track speed skater by that name.
```

#### LLM en tant qu'agent

En utilisant le modèle Qwen-plus en tant qu'agent avec un outil permettant d'obtenir les données récoltées du site de l'ISU (voir script *retrieve_descriptions_skater_and_race.py*), on obtient les résultats suivants :

| Nom du patineur  | Biographie générée par LLM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Sascha LAUBER    | Sascha Lauber is a Swiss short track speed skater who competed internationally during the late 1990s and 2000s. Born on April 24, 1978, he represented Switzerland in multiple World Championships between 1998 and 2006, with his best individual result being 17th place in the 500 meters at the 2005 World Championships. He also participated in several ISU World Cup events and European Championships, achieving a top-10 finish by placing 10th in the 500 meters at the 2004 European Championships. His most consistent performances came in the 500m and 1000m distances across various international competitions. Notably, he competed in the 2001 Olympic Qualifier event but did not qualify for the Winter Olympics. Lauber's career highlights include competing at five consecutive World Championships from 2002 to 2006 and regularly representing Switzerland in elite short track events. Despite his active competition span, details about his club, skating beginnings, height, or personal hobbies are not publicly available. He remained an active competitor as of 2006, based on competition records. Unusually, there is very limited biographical information about him beyond his competition results, which is uncommon for athletes at this level. There are no known major medals or podium finishes in ISU championship events in his record.                                                                                                                                                                                                                                                                                                                                                                                                      |
| Thibault METRAUX | Thibault Metraux is a Swiss short track speed skater, born on January 10, 2002, in Aigle, Switzerland, and hails from Leysin. He began skating in 2016 after transitioning from ice hockey, inspired by a talent identification program linked to the 2020 Winter Youth Olympic Games in Lausanne. Metraux quickly developed a passion for short track, drawn to its speed and individual nature, and has since represented Switzerland on the international stage. He competed at the 2020 Winter Youth Olympics and has participated in multiple ISU World Junior Championships, with his best result being 36th in the 500m in 2020. Metraux has taken part in several ISU World Cup events and European and World Championships, achieving notable placements such as 27th in the 1500m at the 2021 European Championships and 39th in the 1500m at the 2023 World Championships. While still developing his competitive profile, he continues to gain experience across all distances—500m, 1000m, and 1500m—on the global circuit. Unusually for a short track specialist, Metraux has also competed in long track speed skating, including appearances on the World Cup circuit and at the 2024 European Single Distances Championships in Heerenveen. Off the ice, Metraux is a student and lists cycling and music among his hobbies. Fluent in French and English, he goes by the nickname "Pepito," given to him by his first coach. His sporting idol is Russian short tracker Victor An, and he credits his family as the most influential force in his career. Motivated by the quote “Train hard, it will pay off,” Metraux aims to compete at the 2026 Winter Olympics in Milan-Cortina and eventually become a coach or sports teacher after retiring from competition. |

#### LLM avec données dans prompt

Au final, il était plus optimal de placer les données dans le prompt et donner les instructions en même temps. Les résultats obtenus sont similaires aux précédents avec le prompt ci-dessous (voir script *generate_biography.py*) :

```
"system" : "Your task is to write a text of 5 sentences using given data. If some information is missing, do not make anything up. I would like to have a general summary of this athlete (including sporting achievements), but also any unusual information."
"human" : skater_json_str
```

### Résumé d'une compétition

TODO
